/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/canvas.ts":
/*!***********************!*\
  !*** ./src/canvas.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Canvas: () => (/* binding */ Canvas)\n/* harmony export */ });\n/* harmony import */ var _drawUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./drawUtils */ \"./src/drawUtils.ts\");\n/* harmony import */ var _models_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./models/utils */ \"./src/models/utils.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\n\n\nclass Canvas {\n    constructor() {\n        this.canvasDOM = document.getElementById('board');\n        this.ctx = this.canvasDOM.getContext('2d');\n        this.squareSize = 0;\n    }\n    draw(board, selectedSquareNb, highlightedSquareNbs, lastMove, bestMove) {\n        this.recalculateSquareSize();\n        this.canvasDOM.width = document.getElementById('board').clientWidth * window.devicePixelRatio;\n        this.canvasDOM.height = document.getElementById('board').clientHeight * window.devicePixelRatio;\n        for (let squareNb = 0; squareNb < 64; squareNb++) {\n            const { x, y } = this.squareNbToXY(squareNb);\n            const squareColor = this.getSquareColor(squareNb) === 'dark' ? darkSquares : lightSquares;\n            this.fillRect(x, y, this.squareSize, this.squareSize, squareColor);\n            if (selectedSquareNb === squareNb) {\n                this.fillRect(x, y, this.squareSize, this.squareSize, 'rgba(255, 255, 0, 0.5)');\n            }\n            if (lastMove?.startSquareNb === squareNb || lastMove?.endSquareNb === squareNb) {\n                this.fillRect(x, y, this.squareSize, this.squareSize, 'rgba(150, 150, 50, 0.75)');\n            }\n            if (bestMove?.startSquareNb === squareNb || bestMove?.endSquareNb === squareNb) {\n                this.fillRect(x, y, this.squareSize, this.squareSize, 'rgba(100, 255, 100, 0.5)');\n            }\n            if (highlightedSquareNbs[squareNb]) {\n                this.fillRect(x, y, this.squareSize, this.squareSize, 'rgba(255, 80, 70,0.75)');\n            }\n        }\n        this.drawCoordinates();\n        if (bestMove)\n            this.createBestMoveArrow(bestMove);\n        this.drawPieces(board);\n        if (selectedSquareNb !== null)\n            this.drawPossibleMoves(board, selectedSquareNb);\n    }\n    fillRect(x, y, width, height, color) {\n        this.ctx.fillStyle = color;\n        this.ctx.fillRect(Math.floor(x), Math.floor(y), Math.ceil(width), Math.ceil(height));\n    }\n    setup() {\n        this.canvasDOM.addEventListener('contextmenu', (event) => event.preventDefault());\n    }\n    drawPossibleMoves(board, selectedSquareNb) {\n        const piece = board.squares[selectedSquareNb];\n        const moves = piece.possibleMoves(selectedSquareNb, board, board.createOpponentAttackTable());\n        for (let move of moves) {\n            const { x, y } = this.squareNbToXY(move.endSquareNb);\n            const isOccupied = board.squares[move.endSquareNb] !== null;\n            this.ctx.beginPath();\n            this.ctx.arc(x + this.squareSize / 2, y + this.squareSize / 2, isOccupied ? this.squareSize / 2 : this.squareSize / 8, 0, Math.PI * 2);\n            this.ctx.fillStyle = isOccupied ? 'rgba(30, 0, 100, 0.25)' : 'rgba(0, 0, 0, 0.2)';\n            this.ctx.fill();\n        }\n    }\n    squareNbToXY(squareNb) {\n        return {\n            x: this.squareSize * (squareNb % 8),\n            y: this.canvasDOM.height - this.squareSize - this.squareSize * Math.floor(squareNb / 8),\n        };\n    }\n    getSquareColor(squareNb) {\n        return ((squareNb >> 3) + squareNb) % 2 === 0 ? 'dark' : 'light';\n    }\n    squareNbFromMouseEvent(event) {\n        const cssSquareSize = this.squareSize / window.devicePixelRatio;\n        const cssX = event.clientX - this.canvasDOM.getBoundingClientRect().x - this.canvasDOM.clientLeft;\n        const cssY = event.clientY - this.canvasDOM.getBoundingClientRect().y - this.canvasDOM.clientTop;\n        if (cssX < 0 ||\n            cssY < 0 ||\n            cssX * devicePixelRatio >= this.canvasDOM.width /* canvasDOM.width is in js width, but cssX isn't */ ||\n            cssY * devicePixelRatio >= this.canvasDOM.height /* canvasDOM.height is in js width, but cssY isn't */)\n            return null;\n        return Math.floor(cssX / cssSquareSize) + Math.floor((cssSquareSize * 8 - (cssY + 1)) / cssSquareSize) * 8;\n    }\n    drawCoordinates() {\n        const fontSize = this.squareSize / 5;\n        this.ctx.font = `${fontSize}px Arial`;\n        for (let file = 0; file < 8; file++) {\n            this.ctx.fillStyle = this.getSquareColor(file) === 'dark' ? lightSquares : darkSquares;\n            this.ctx.fillText(String.fromCharCode(97 + file), this.squareSize * (file + 1) - fontSize, this.canvasDOM.height - fontSize * 0.4);\n        }\n        for (let rank = 0; rank < 8; rank++) {\n            this.ctx.fillStyle = this.getSquareColor(rank * 8) === 'dark' ? lightSquares : darkSquares;\n            this.ctx.fillText(String(rank + 1), fontSize * 0.4, this.squareSize * (7 - rank) + fontSize * 1.2);\n        }\n    }\n    createBestMoveArrow(move) {\n        const startPosition = (0,_models_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToFileRank)(move.startSquareNb);\n        const endPosition = (0,_models_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToFileRank)(move.endSquareNb);\n        const width = this.squareSize / 12;\n        const color = 'rgba(50, 150, 50, 1)';\n        const startCoordinates = {\n            fromX: startPosition.file * this.squareSize + this.squareSize / 2,\n            fromY: (7 - startPosition.rank) * this.squareSize + this.squareSize / 2,\n        };\n        const endCoordinates = {\n            toX: endPosition.file * this.squareSize + this.squareSize / 2,\n            toY: (7 - endPosition.rank) * this.squareSize + this.squareSize / 2,\n        };\n        (0,_drawUtils__WEBPACK_IMPORTED_MODULE_0__.drawArrow)(startCoordinates, endCoordinates, width, color, this.ctx);\n    }\n    async drawPieces(board) {\n        while (_drawUtils__WEBPACK_IMPORTED_MODULE_0__.imagesLoading > 0) {\n            await (0,_utils__WEBPACK_IMPORTED_MODULE_2__.waitOneMillisecondAsync)();\n        }\n        for (let squareNb = 0; squareNb < 64; squareNb++) {\n            const piece = board.squares[squareNb];\n            if (!piece)\n                continue;\n            const { x, y } = this.squareNbToXY(squareNb);\n            const image = _drawUtils__WEBPACK_IMPORTED_MODULE_0__.freeChessPiecesImages[piece.color][piece.name];\n            const offset = (this.squareSize - this.pieceSize) / 2;\n            this.ctx.drawImage(image, x + offset, y + offset, this.pieceSize, this.pieceSize);\n        }\n    }\n    get pieceSize() {\n        return this.squareSize * 0.97;\n    }\n    recalculateSquareSize() {\n        this.squareSize =\n            (Math.min(document.getElementById('board').clientWidth, document.getElementById('board').clientHeight) /\n                8) *\n                window.devicePixelRatio;\n    }\n}\nconst lightSquares = '#e5d7bf';\nconst darkSquares = '#b88465';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FudmFzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NhbnZhcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQXdCLFNBQVMsRUFBRSxxQkFBcUIsRUFBRSxhQUFhLEVBQUUsTUFBTSxhQUFhLENBQUE7QUFHbkcsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZ0JBQWdCLENBQUE7QUFDbkQsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sU0FBUyxDQUFBO0FBRWpELE1BQU0sT0FBTyxNQUFNO0lBQW5CO1FBQ29CLGNBQVMsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBc0IsQ0FBQTtRQUNoRSxRQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUE2QixDQUFBO1FBRTFFLGVBQVUsR0FBRyxDQUFDLENBQUE7SUErSjFCLENBQUM7SUE3SkcsSUFBSSxDQUNBLEtBQVksRUFDWixnQkFBK0IsRUFDL0Isb0JBQStCLEVBQy9CLFFBQTBCLEVBQzFCLFFBQXFCO1FBRXJCLElBQUksQ0FBQyxxQkFBcUIsRUFBRSxDQUFBO1FBRTVCLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFFLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQTtRQUM5RixJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBRSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsZ0JBQWdCLENBQUE7UUFFaEcsS0FBSyxJQUFJLFFBQVEsR0FBRyxDQUFDLEVBQUUsUUFBUSxHQUFHLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRTtZQUM5QyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUE7WUFFNUMsTUFBTSxX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\n\n//# sourceURL=webpack://chess/./src/canvas.ts?");

/***/ }),

/***/ "./src/chess.ts":
/*!**********************!*\
  !*** ./src/chess.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Chess: () => (/* binding */ Chess)\n/* harmony export */ });\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.ts\");\n/* harmony import */ var _models_bots_depthNBot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./models/bots/depthNBot */ \"./src/models/bots/depthNBot.ts\");\n/* harmony import */ var _models_game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./models/game */ \"./src/models/game.ts\");\n/* harmony import */ var _models_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./models/utils */ \"./src/models/utils.ts\");\n\n\n\n\nclass Chess {\n    constructor(playMode = '1v1') {\n        this.game = new _models_game__WEBPACK_IMPORTED_MODULE_2__.Game();\n        this.selectedSquareNb = null;\n        this.highlightedSquareNbs = new Array(64).fill(false);\n        this.showBestMove = false;\n        this.canvas = new _canvas__WEBPACK_IMPORTED_MODULE_0__.Canvas();\n        this.playMode = playMode;\n    }\n    get currentBoard() {\n        return this.game.currentBoard;\n    }\n    setup() {\n        this.canvas.setup();\n        if (this.playMode === '1v1')\n            this.showBestMove = true;\n        if (this.playMode === '1vC')\n            this.hideEvaluation();\n        else\n            this.showEvaluation();\n        this.setActivePlayModeButton();\n        this.newMove();\n    }\n    draw() {\n        this.toggleActions();\n        this.toggleNextPlayer();\n        this.updateEvaluation();\n        this.drawCanvas();\n    }\n    drawCanvas() {\n        this.canvas.draw(this.currentBoard, this.selectedSquareNb, this.highlightedSquareNbs, this.game.lastMove, this.bestMove && this.showBestMove ? this.bestMove.move : null);\n    }\n    newMove() {\n        this.updateMovesPanel();\n        this.resetSelectedSquare();\n        this.highlightedSquareNbs.fill(false);\n        this.calculateBestMove();\n        this.draw();\n    }\n    clicked(event) {\n        if (event.type === 'click') {\n            // Make sure the event is triggered on child elements of the buttons\n            const targetButton = event.target.closest('button');\n            if (targetButton === document.getElementById('undo'))\n                this.undo();\n            if (targetButton === document.getElementById('redo'))\n                this.redo();\n            if (targetButton === document.getElementById('reset'))\n                this.reset();\n            if (targetButton === document.getElementById('copy_moves')) {\n                navigator.clipboard.writeText(this.game.moves.map((_, move) => this.game.calculateMoveNotation(move)).join(' '));\n            }\n        }\n        const squareNb = this.canvas.squareNbFromMouseEvent(event);\n        if (event.type === 'mousedown') {\n            if (squareNb !== null) {\n                this.clickedSquare(squareNb, event.button === 0 ? 'left' : 'right');\n            }\n            else {\n                this.clickedOutside();\n            }\n        }\n    }\n    keydown(event) {\n        if (event.key === 'ArrowLeft')\n            this.undo();\n        if (event.key === 'ArrowRight')\n            this.redo();\n    }\n    windowResize() {\n        this.drawCanvas();\n    }\n    clickedOutside() {\n        this.resetSelectedSquare();\n    }\n    clickedSquare(squareNb, clickType) {\n        if (clickType === 'left') {\n            const piece = this.currentBoard.squares[squareNb];\n            this.highlightedSquareNbs.fill(false);\n            if (squareNb === this.selectedSquareNb) {\n                // Deselects the square if it was already selected\n                this.selectedSquareNb = null;\n            }\n            else {\n                const move = this.getMove(squareNb);\n                if (this.selectedSquareNb !== null && move) {\n                    // Makes a move if possible\n                    this.game.addMove(move);\n                    this.newMove();\n                }\n                else if (piece === null) {\n                    // Deselects the square if it is empty\n                    this.selectedSquareNb = null;\n                }\n                else if (piece.color === this.currentBoard.colorToMove) {\n                    // Selects the square if it contains a piece of the current player\n                    this.selectedSquareNb = squareNb;\n                }\n            }\n        }\n        if (clickType === 'right') {\n            this.selectedSquareNb = null;\n            this.highlightedSquareNbs[squareNb] = !this.highlightedSquareNbs[squareNb];\n        }\n        this.draw();\n    }\n    resetSelectedSquare() {\n        this.selectedSquareNb = null;\n        this.draw();\n    }\n    // Calls the possibleMoves() method of the piece on the selected square\n    getMove(endSquareNb) {\n        if (this.selectedSquareNb === null)\n            return;\n        const piece = this.currentBoard.squares[this.selectedSquareNb];\n        const possibleMoves = piece.possibleMoves(this.selectedSquareNb, this.currentBoard, this.currentBoard.createOpponentAttackTable());\n        return possibleMoves.find((move) => move.endSquareNb === endSquareNb);\n    }\n    toggleNextPlayer() {\n        const whiteToMoveElement = document.getElementById('white_to_move');\n        const blackToMoveElement = document.getElementById('black_to_move');\n        const endOfGameElement = document.getElementById('end_of_game');\n        const endOfGameText = document.getElementById('end_of_game_text');\n        whiteToMoveElement.setAttribute('style', 'display: none;');\n        blackToMoveElement.setAttribute('style', 'display: none;');\n        endOfGameElement.setAttribute('style', 'display: none;');\n        const endOfGame = this.currentBoard.endOfGame;\n        switch (endOfGame) {\n            case 'checkmate':\n                const colorWinner = (0,_models_utils__WEBPACK_IMPORTED_MODULE_3__.invertColor)(this.currentBoard.colorToMove);\n                endOfGameText.innerText = `${colorWinner.charAt(0).toUpperCase() + colorWinner.slice(1)} wins by checkmate!`;\n                endOfGameElement.setAttribute('style', '');\n                break;\n            case 'stalemate':\n                endOfGameText.innerText = 'Stalemate!';\n                endOfGameElement.setAttribute('style', '');\n                break;\n            case null:\n                const isWhite = this.currentBoard.colorToMove === 'white';\n                if (isWhite)\n                    whiteToMoveElement.setAttribute('style', '');\n                else\n                    blackToMoveElement.setAttribute('style', '');\n        }\n    }\n    calculateBestMove() {\n        this.stopBot();\n        if (!(this.playMode === '1vC' && this.currentBoard.colorToMove === 'white')) {\n            this.runBot(() => this.playBestMove());\n        }\n    }\n    updateEvaluation() {\n        const element = document.getElementById('evaluation');\n        switch (this.bestMove) {\n            case undefined:\n                element.innerHTML = '. . .';\n                break;\n            case null:\n                element.innerHTML = 'Evaluation: /';\n                break;\n            default:\n                element.innerHTML = `Evaluation: ${this.bestMove.evaluation}`;\n        }\n    }\n    showEvaluation() {\n        const element = document.getElementById('evaluation');\n        if (element)\n            element?.setAttribute('style', 'display: flex;');\n    }\n    hideEvaluation() {\n        const element = document.getElementById('evaluation');\n        if (element)\n            element.setAttribute('style', 'display: none;');\n    }\n    playBestMove() {\n        if (this.playMode === 'CvC' || (this.playMode === '1vC' && this.currentBoard.colorToMove === 'black')) {\n            if (this.bestMove) {\n                this.game.addMove(this.bestMove.move);\n                this.newMove();\n            }\n        }\n        this.draw();\n    }\n    stopBot() {\n        if (this.calculateBestMoveHandle !== undefined)\n            cancelIdleCallback(this.calculateBestMoveHandle);\n    }\n    runBot(after) {\n        this.bestMove = undefined;\n        this.calculateBestMoveHandle = requestIdleCallback((deadline) => {\n            const bot = new _models_bots_depthNBot__WEBPACK_IMPORTED_MODULE_1__.DepthNBot(this.currentBoard, 4);\n            this.bestMove = bot.run();\n            after();\n        });\n        const botWorker = new Worker('./dist/botWorker.js');\n        botWorker.onmessage = (event) => console.log(event.data);\n        botWorker.postMessage(this.currentBoard);\n    }\n    jumpToMove(moveNb) {\n        this.game.jumpToMove(moveNb);\n        this.newMove();\n    }\n    undo() {\n        this.game.undo(this.playMode === '1vC' ? 2 : 1);\n        this.newMove();\n    }\n    redo() {\n        this.game.redo();\n        this.newMove();\n    }\n    reset() {\n        this.game = new _models_game__WEBPACK_IMPORTED_MODULE_2__.Game();\n        this.newMove();\n    }\n    toggleActions() {\n        if (this.game.canUndo)\n            document.getElementById('undo').removeAttribute('disabled');\n        else\n            document.getElementById('undo').setAttribute('disabled', '');\n        if (this.game.canRedo)\n            document.getElementById('redo').removeAttribute('disabled');\n        else\n            document.getElementById('redo').setAttribute('disabled', '');\n    }\n    updateMovesPanel() {\n        let html = '';\n        const moves = document.getElementById('moves');\n        this.game.moves.forEach((_, index) => {\n            // Add the move number every two moves\n            if (index % 2 === 0) {\n                html += `<div>${index / 2 + 1}.</div>`;\n                // The move number starts at one but the index starts at zero, so + 1 is required to adjust.\n            }\n            html +=\n                this.game.moveNb - 1 === index\n                    ? `<div class=\"move currentMove\">${this.game.calculateMoveNotation(index)}</div>`\n                    : `<div class=\"move\" onMouseDown=\"window.chess.jumpToMove(${index + 1})\">${this.game.calculateMoveNotation(index)}</div>`;\n        });\n        moves.innerHTML = html;\n        const currentMove = document.getElementsByClassName('currentMove')[0];\n        if (currentMove) {\n            if (window.matchMedia('(min-width: 50rem)').matches) {\n                currentMove.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            }\n            else {\n                moves.scrollTop = moves.scrollHeight;\n            }\n        }\n    }\n    setActivePlayModeButton() {\n        const toggleVisibility = (id, visibility) => {\n            document.getElementById(id).style.visibility = visibility ? 'visible' : 'hidden';\n        };\n        toggleVisibility('player_vs_player_arrow', this.playMode === '1v1');\n        toggleVisibility('player_vs_bot_arrow', this.playMode === '1vC');\n        toggleVisibility('bot_vs_bot_arrow', this.playMode === 'CvC');\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY2hlc3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUVqQyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0seUJBQXlCLENBQUE7QUFDbkQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGVBQWUsQ0FBQTtBQUdwQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUE7QUFFNUMsTUFBTSxPQUFPLEtBQUs7SUFVZCxZQUFZLFdBQXFCLEtBQUs7UUFUOUIsU0FBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUE7UUFFakIscUJBQWdCLEdBQWtCLElBQUksQ0FBQTtRQUN0Qyx5QkFBb0IsR0FBRyxJQUFJLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7UUFFaEQsaUJBQVksR0FBRyxLQUFLLENBQUE7UUFFcEIsV0FBTSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUE7UUFHekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7SUFDNUIsQ0FBQztJQUVELElBQVksWUFBWTtRQUNwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFBO0lBQ2pDLENBQUM7SUFFRCxLQUFLO1FBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQTtRQUVuQixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSztZQUFFLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFBO1FBQ3JELElBQUksSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLO1lBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBOztZQUM3QyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQUE7UUFFMUIsSUFBSSxDQUFDLHVCQUF1QixFQUFFLENBQUE7UUFDOUIsSUFBSSxDQUFDLE9BQU8sRUFB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\n\n//# sourceURL=webpack://chess/./src/chess.ts?");

/***/ }),

/***/ "./src/drawUtils.ts":
/*!**************************!*\
  !*** ./src/drawUtils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cburnettPiecesImages: () => (/* binding */ cburnettPiecesImages),\n/* harmony export */   drawArrow: () => (/* binding */ drawArrow),\n/* harmony export */   freeChessPiecesImages: () => (/* binding */ freeChessPiecesImages),\n/* harmony export */   imagesLoading: () => (/* binding */ imagesLoading)\n/* harmony export */ });\nlet imagesLoading = 0;\n// Free-chess unique pieces, no license\nconst freeChessPiecesImages = {\n    white: {\n        pawn: stringToImage('src/assets/free-chess/white_pawn.svg'),\n        rook: stringToImage('src/assets/free-chess/white_rook.svg'),\n        knight: stringToImage('src/assets/free-chess/white_knight.svg'),\n        bishop: stringToImage('src/assets/free-chess/white_bishop.svg'),\n        queen: stringToImage('src/assets/free-chess/white_queen.svg'),\n        king: stringToImage('src/assets/free-chess/white_king.svg'),\n    },\n    black: {\n        pawn: stringToImage('src/assets/free-chess/black_pawn.svg'),\n        rook: stringToImage('src/assets/free-chess/black_rook.svg'),\n        knight: stringToImage('src/assets/free-chess/black_knight.svg'),\n        bishop: stringToImage('src/assets/free-chess/black_bishop.svg'),\n        queen: stringToImage('src/assets/free-chess/black_queen.svg'),\n        king: stringToImage('src/assets/free-chess/black_king.svg'),\n    },\n};\n// Lichess pieces https://github.com/lichess-org/lila/tree/master/public/piece/cburnett, license: https://creativecommons.org/licenses/by/3.0/\nconst cburnettPiecesImages = {\n    white: {\n        pawn: stringToImage('src/assets/cburnett/wP.svg'),\n        rook: stringToImage('src/assets/cburnett/wR.svg'),\n        knight: stringToImage('src/assets/cburnett/wN.svg'),\n        bishop: stringToImage('src/assets/cburnett/wB.svg'),\n        queen: stringToImage('src/assets/cburnett/wQ.svg'),\n        king: stringToImage('src/assets/cburnett/wK.svg'),\n    },\n    black: {\n        pawn: stringToImage('src/assets/cburnett/bP.svg'),\n        rook: stringToImage('src/assets/cburnett/bR.svg'),\n        knight: stringToImage('src/assets/cburnett/bN.svg'),\n        bishop: stringToImage('src/assets/cburnett/bB.svg'),\n        queen: stringToImage('src/assets/cburnett/bQ.svg'),\n        king: stringToImage('src/assets/cburnett/bK.svg'),\n    },\n};\nfunction stringToImage(data) {\n    const image = new Image();\n    imagesLoading++;\n    image.onload = () => imagesLoading--;\n    image.src = data;\n    return image;\n}\nfunction drawArrow({ fromX, fromY }, { toX, toY }, width, color, ctx) {\n    //variables to be used when creating the arrow\n    var headlen = width * 2;\n    var angle = Math.atan2(toY - fromY, toX - fromX);\n    ctx.strokeStyle = color;\n    //starting path of the arrow from the start square to the end square and drawing the stroke\n    ctx.beginPath();\n    ctx.moveTo(fromX, fromY);\n    ctx.lineTo(toX, toY);\n    ctx.lineWidth = width;\n    ctx.stroke();\n    //starting a new path from the head of the arrow to one of the sides of the point\n    ctx.beginPath();\n    ctx.moveTo(toX, toY);\n    ctx.lineTo(toX - headlen * Math.cos(angle - Math.PI / 7), toY - headlen * Math.sin(angle - Math.PI / 7));\n    //path from the side point of the arrow, to the other side point\n    ctx.lineTo(toX - headlen * Math.cos(angle + Math.PI / 7), toY - headlen * Math.sin(angle + Math.PI / 7));\n    //path from the side point back to the tip of the arrow, and then again to the opposite side point\n    ctx.lineTo(toX, toY);\n    ctx.lineTo(toX - headlen * Math.cos(angle - Math.PI / 7), toY - headlen * Math.sin(angle - Math.PI / 7));\n    //draws the paths created above\n    ctx.stroke();\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhd1V0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2RyYXdVdGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLENBQUMsSUFBSSxhQUFhLEdBQUcsQ0FBQyxDQUFBO0FBRTVCLHVDQUF1QztBQUN2QyxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBNEQ7SUFDMUYsS0FBSyxFQUFFO1FBQ0gsSUFBSSxFQUFFLGFBQWEsQ0FBQyxzQ0FBc0MsQ0FBQztRQUMzRCxJQUFJLEVBQUUsYUFBYSxDQUFDLHNDQUFzQyxDQUFDO1FBQzNELE1BQU0sRUFBRSxhQUFhLENBQUMsd0NBQXdDLENBQUM7UUFDL0QsTUFBTSxFQUFFLGFBQWEsQ0FBQyx3Q0FBd0MsQ0FBQztRQUMvRCxLQUFLLEVBQUUsYUFBYSxDQUFDLHVDQUF1QyxDQUFDO1FBQzdELElBQUksRUFBRSxhQUFhLENBQUMsc0NBQXNDLENBQUM7S0FDOUQ7SUFDRCxLQUFLLEVBQUU7UUFDSCxJQUFJLEVBQUUsYUFBYSxDQUFDLHNDQUFzQyxDQUFDO1FBQzNELElBQUksRUFBRSxhQUFhLENBQUMsc0NBQXNDLENBQUM7UUFDM0QsTUFBTSxFQUFFLGFBQWEsQ0FBQyx3Q0FBd0MsQ0FBQztRQUMvRCxNQUFNLEVBQUUsYUFBYSxDQUFDLHdDQUF3QyxDQUFDO1FBQy9ELEtBQUssRUFBRSxhQUFhLENBQUMsdUNBQXVDLENBQUM7UUFDN0QsSUFBSSxFQUFFLGFBQWEsQ0FBQyxzQ0FBc0MsQ0FBQztLQUM5RDtDQUNKLENBQUE7QUFFRCw4SUFBOEk7QUFDOUksTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQTREO0lBQ3pGLEtBQUssRUFBRTtRQUNILElBQUksRUFBRSxhQUFhLENBQUMsNEJBQTRCLENBQUM7UUFDakQsSUFBSSxFQUFFLGFBQWEsQ0FBQyw0QkFBNEIsQ0FBQztRQUNqRCxNQUFNLEVBQUUsYUFBYSxDQUFDLDRCQUE0QixDQUFDO1FBQ25ELE1BQU0sRUFBRSxhQUFhLENB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\n\n//# sourceURL=webpack://chess/./src/drawUtils.ts?");

/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _chess__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chess */ \"./src/chess.ts\");\n\nlet chess = new _chess__WEBPACK_IMPORTED_MODULE_0__.Chess();\nif (document.readyState === 'complete') {\n    chess.setup();\n}\nelse {\n    document.onreadystatechange = () => document.readyState === 'complete' && chess.setup();\n}\nwindow.chess = chess;\nconst playmodeIDs = ['player_vs_player', 'player_vs_bot', 'bot_vs_bot'];\nconst idToPlayMode = {\n    player_vs_player: '1v1',\n    player_vs_bot: '1vC',\n    bot_vs_bot: 'CvC',\n};\nplaymodeIDs.forEach((id) => {\n    document.getElementById(id).addEventListener('click', () => {\n        chess.stopBot();\n        chess = new _chess__WEBPACK_IMPORTED_MODULE_0__.Chess(idToPlayMode[id]);\n        chess.setup();\n        window.chess = chess;\n    });\n});\ndocument.addEventListener('click', (event) => {\n    chess.clicked(event);\n});\ndocument.addEventListener('mousedown', (event) => {\n    chess.clicked(event);\n});\ndocument.addEventListener('keydown', (event) => {\n    chess.keydown(event);\n});\nwindow.addEventListener('resize', () => chess.windowResize());\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9tYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFHL0IsSUFBSSxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQTtBQUV2QixJQUFJLFFBQVEsQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO0lBQ3BDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQTtDQUNoQjtLQUFNO0lBQ0gsUUFBUSxDQUFDLGtCQUFrQixHQUFHLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxVQUFVLEtBQUssVUFBVSxJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQTtDQUMxRjtBQUVELE1BQU0sQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO0FBRXBCLE1BQU0sV0FBVyxHQUFHLENBQUMsa0JBQWtCLEVBQUUsZUFBZSxFQUFFLFlBQVksQ0FBQyxDQUFBO0FBQ3ZFLE1BQU0sWUFBWSxHQUFtRDtJQUNqRSxnQkFBZ0IsRUFBRSxLQUFLO0lBQ3ZCLGFBQWEsRUFBRSxLQUFLO0lBQ3BCLFVBQVUsRUFBRSxLQUFLO0NBQ3BCLENBQUE7QUFFRCxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7SUFDdkIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFO1FBQ3hELEtBQUssQ0FBQyxPQUFPLEVBQUUsQ0FBQTtRQUVmLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQTtRQUNuQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUE7UUFDYixNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtJQUN4QixDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUMsQ0FBQyxDQUFBO0FBRUYsUUFBUSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxFQUFFO0lBQ3pDLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDeEIsQ0FBQyxDQUFDLENBQUE7QUFDRixRQUFRLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBaUIsRUFBRSxFQUFFO0lBQ3pELEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDeEIsQ0FBQyxDQUFDLENBQUE7QUFDRixRQUFRLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLENBQUMsS0FBb0IsRUFBRSxFQUFFO0lBQzFELEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7QUFDeEIsQ0FBQyxDQUFDLENBQUE7QUFFRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFBIn0=\n\n//# sourceURL=webpack://chess/./src/main.ts?");

/***/ }),

/***/ "./src/models/board.ts":
/*!*****************************!*\
  !*** ./src/models/board.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Board: () => (/* binding */ Board)\n/* harmony export */ });\n/* harmony import */ var _pieces_bishop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pieces/bishop */ \"./src/models/pieces/bishop.ts\");\n/* harmony import */ var _pieces_king__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pieces/king */ \"./src/models/pieces/king.ts\");\n/* harmony import */ var _pieces_knight__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pieces/knight */ \"./src/models/pieces/knight.ts\");\n/* harmony import */ var _pieces_pawn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pieces/pawn */ \"./src/models/pieces/pawn.ts\");\n/* harmony import */ var _pieces_queen__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pieces/queen */ \"./src/models/pieces/queen.ts\");\n/* harmony import */ var _pieces_rook__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pieces/rook */ \"./src/models/pieces/rook.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils */ \"./src/models/utils.ts\");\n\n\n\n\n\n\n\nclass Board {\n    constructor(boardOrFEN, options) {\n        this.colorToMove = 'white';\n        this.canCastle = {\n            white: { queenSide: false, kingSide: false },\n            black: { queenSide: false, kingSide: false },\n        };\n        this.enPassantTargetSquareNb = null;\n        if (typeof boardOrFEN === 'string') {\n            this.squares = new Array(64).fill(null);\n            this.importFEN(boardOrFEN);\n        }\n        else if (boardOrFEN) {\n            const board = boardOrFEN;\n            this.squares = [...board.squares];\n            this.colorToMove = options?.switchColor ? (0,_utils__WEBPACK_IMPORTED_MODULE_6__.invertColor)(board.colorToMove) : board.colorToMove;\n            this.canCastle = { white: { ...board.canCastle.white }, black: { ...board.canCastle.black } };\n            this.enPassantTargetSquareNb = options?.resetEnPassant ? null : board.enPassantTargetSquareNb;\n        }\n        else {\n            this.squares = new Array(64).fill(null);\n            this.importFEN(Board.startBoardFEN);\n        }\n    }\n    importFEN(FEN) {\n        const piecesId = { r: _pieces_rook__WEBPACK_IMPORTED_MODULE_5__.Rook, n: _pieces_knight__WEBPACK_IMPORTED_MODULE_2__.Knight, b: _pieces_bishop__WEBPACK_IMPORTED_MODULE_0__.Bishop, q: _pieces_queen__WEBPACK_IMPORTED_MODULE_4__.Queen, k: _pieces_king__WEBPACK_IMPORTED_MODULE_1__.King, p: _pieces_pawn__WEBPACK_IMPORTED_MODULE_3__.Pawn };\n        const [placement, colorToMove, canCastle, enPassantTargetSquare] = FEN.split(' ');\n        this.squares = new Array(64).fill(null);\n        placement.split('/').forEach((rowPlacement, index) => {\n            const rank = 7 - index;\n            let file = 0;\n            for (let char of rowPlacement) {\n                if (char > '8') {\n                    const c = char.toLowerCase();\n                    if (c !== 'r' && c !== 'n' && c !== 'b' && c !== 'q' && c !== 'k' && c !== 'p')\n                        throw 'Invalid piece';\n                    const Piece = piecesId[c];\n                    this.squares[(0,_utils__WEBPACK_IMPORTED_MODULE_6__.fileRankToSquareNb)({ file, rank })] = new Piece(char === c ? 'black' : 'white');\n                    file++;\n                }\n                else {\n                    let number = Number(char);\n                    while (number > 0) {\n                        this.squares[(0,_utils__WEBPACK_IMPORTED_MODULE_6__.fileRankToSquareNb)({ file, rank })] = null;\n                        number--;\n                        file++;\n                    }\n                }\n            }\n        });\n        this.colorToMove = colorToMove === 'w' ? 'white' : 'black';\n        this.canCastle.white.kingSide = canCastle.includes('K');\n        this.canCastle.white.queenSide = canCastle.includes('Q');\n        this.canCastle.black.kingSide = canCastle.includes('k');\n        this.canCastle.black.queenSide = canCastle.includes('q');\n        this.enPassantTargetSquareNb =\n            enPassantTargetSquare === '-' ? null : (0,_utils__WEBPACK_IMPORTED_MODULE_6__.coordinatesToSquareNb)(enPassantTargetSquare);\n    }\n    possibleMoves() {\n        const opponentAttackTable = this.createOpponentAttackTable();\n        let moves = [];\n        this.squares.forEach((piece, squareNb) => {\n            if (piece && piece.color === this.colorToMove) {\n                moves = [...moves, ...piece.possibleMoves(squareNb, this, opponentAttackTable)];\n            }\n        });\n        return moves;\n    }\n    get endOfGame() {\n        if (this.possibleMoves().length === 0) {\n            return this.isInCheck() ? 'checkmate' : 'stalemate';\n        }\n        else\n            return null;\n    }\n    isInCheck(opponentAttackTable = this.createOpponentAttackTable()) {\n        const kingSquareNb = this.squares.findIndex((piece) => piece?.name === 'king' && piece.color === this.colorToMove);\n        return opponentAttackTable.attackedSquares[kingSquareNb];\n    }\n    createOpponentAttackTable() {\n        const table = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.createEmptyAttackTable)();\n        for (let squareNb = 0; squareNb < 64; squareNb++) {\n            const piece = this.squares[squareNb];\n            if (piece && piece.color !== this.colorToMove) {\n                piece.updateAttackTable(squareNb, this, table);\n            }\n        }\n        return table;\n    }\n}\nBoard.startBoardFEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 0';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9hcmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9kZWxzL2JvYXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN4QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBQ3BDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQTtBQUN4QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBRXBDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQTtBQUN0QyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sZUFBZSxDQUFBO0FBRXBDLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxzQkFBc0IsRUFBRSxrQkFBa0IsRUFBRSxXQUFXLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFeEcsTUFBTSxPQUFPLEtBQUs7SUFnQmQsWUFBWSxVQUEyQixFQUFFLE9BQTJEO1FBWjdGLGdCQUFXLEdBQWUsT0FBTyxDQUFBO1FBQ2pDLGNBQVMsR0FBYztZQUMxQixLQUFLLEVBQUUsRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUU7WUFDNUMsS0FBSyxFQUFFLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFO1NBQy9DLENBQUE7UUFDTSw0QkFBdUIsR0FBa0IsSUFBSSxDQUFBO1FBUWhELElBQUksT0FBTyxVQUFVLEtBQUssUUFBUSxFQUFFO1lBQ2hDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1lBQ3ZDLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUE7U0FDN0I7YUFBTSxJQUFJLFVBQVUsRUFBRTtZQUNuQixNQUFNLEtBQUssR0FBRyxVQUFV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\n\n//# sourceURL=webpack://chess/./src/models/board.ts?");

/***/ }),

/***/ "./src/models/bots/bot.ts":
/*!********************************!*\
  !*** ./src/models/bots/bot.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bot: () => (/* binding */ Bot)\n/* harmony export */ });\nclass Bot {\n    constructor(board, depth) {\n        this.board = board;\n        this.depth = depth;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm90LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9ib3RzL2JvdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxNQUFNLE9BQWdCLEdBQUc7SUFDckIsWUFBbUIsS0FBWSxFQUFTLEtBQW9CO1FBQXpDLFVBQUssR0FBTCxLQUFLLENBQU87UUFBUyxVQUFLLEdBQUwsS0FBSyxDQUFlO0lBQUcsQ0FBQztDQUduRSJ9\n\n//# sourceURL=webpack://chess/./src/models/bots/bot.ts?");

/***/ }),

/***/ "./src/models/bots/depthNBot.ts":
/*!**************************************!*\
  !*** ./src/models/bots/depthNBot.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DepthNBot: () => (/* binding */ DepthNBot)\n/* harmony export */ });\n/* harmony import */ var _evaluators_pieceSquareTableEvaluator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../evaluators/pieceSquareTableEvaluator */ \"./src/models/evaluators/pieceSquareTableEvaluator.ts\");\n/* harmony import */ var _bot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bot */ \"./src/models/bots/bot.ts\");\n\n\nclass DepthNBot extends _bot__WEBPACK_IMPORTED_MODULE_1__.Bot {\n    constructor() {\n        super(...arguments);\n        this.checkmateScore = 999999999;\n        // The following properties are only used for performance analysis\n        this.nbMinimax = 0;\n        this.perfNbEvals = 0;\n        this.perfTimeEvals = 0;\n        this.perfNbPossibleMoves = 0;\n        this.perfTimePossibleMoves = 0;\n    }\n    run() {\n        this.nbMinimax = 0;\n        const startTimestamp = performance.now();\n        const moves = this.board.possibleMoves();\n        const colorMultiplier = this.board.colorToMove === 'white' ? 1 : -1;\n        let bestMove = null;\n        let bestEvaluation = -Infinity;\n        for (let move of moves) {\n            const evaluation = this.minimax(move.endBoard, this.depth - 1, -this.checkmateScore, this.checkmateScore) *\n                colorMultiplier;\n            if (evaluation >= bestEvaluation) {\n                bestMove = move;\n                bestEvaluation = evaluation;\n            }\n        }\n        bestEvaluation *= colorMultiplier;\n        const endTimestamp = performance.now();\n        console.log('Time:', Math.round(endTimestamp - startTimestamp), 'ms' + ' - Minimax calls:', this.nbMinimax, ' - Avg time per minimax (microsecs):', ((endTimestamp - startTimestamp) / this.nbMinimax) * 1000);\n        console.log('Avg time evals (microsecs):', (this.perfTimeEvals / this.perfNbEvals) * 1000, 'Avg time possible moves (microsecs):', (this.perfTimePossibleMoves / this.perfNbPossibleMoves) * 1000);\n        console.log('Best move:', bestMove, 'Evaluation:', bestEvaluation);\n        return bestMove ? { move: bestMove, evaluation: bestEvaluation } : null;\n    }\n    minimax(board, remainingDepth, alpha, beta) {\n        this.nbMinimax++;\n        if (remainingDepth === 0) {\n            const startTimestamp = performance.now();\n            const evaluation = new _evaluators_pieceSquareTableEvaluator__WEBPACK_IMPORTED_MODULE_0__.PieceSquareTableEvaluator(board).run();\n            const endTimestamp = performance.now();\n            this.perfNbEvals++;\n            this.perfTimeEvals += endTimestamp - startTimestamp;\n            return evaluation;\n        }\n        if (board.endOfGame === 'checkmate') {\n            return board.colorToMove === 'white'\n                ? -this.checkmateScore - remainingDepth\n                : this.checkmateScore + remainingDepth;\n        }\n        else if (board.endOfGame === 'stalemate') {\n            return 0;\n        }\n        const startTimestamp = performance.now();\n        const moves = board.possibleMoves();\n        const endTimestamp = performance.now();\n        this.perfNbPossibleMoves++;\n        this.perfTimePossibleMoves += endTimestamp - startTimestamp;\n        if (board.colorToMove === 'white') {\n            let bestEvaluation = -Infinity;\n            for (let move of moves) {\n                const evaluation = this.minimax(move.endBoard, remainingDepth - 1, alpha, beta);\n                bestEvaluation = Math.max(bestEvaluation, evaluation);\n                alpha = Math.max(alpha, evaluation);\n                if (beta <= alpha)\n                    break;\n            }\n            return bestEvaluation;\n        }\n        else {\n            let bestEvaluation = Infinity;\n            for (let move of moves) {\n                const evaluation = this.minimax(move.endBoard, remainingDepth - 1, alpha, beta);\n                bestEvaluation = Math.min(bestEvaluation, evaluation);\n                beta = Math.min(beta, evaluation);\n                if (beta <= alpha)\n                    break;\n            }\n            return bestEvaluation;\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwdGhOQm90LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9ib3RzL2RlcHRoTkJvdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSx5Q0FBeUMsQ0FBQTtBQUduRixPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sT0FBTyxDQUFBO0FBRTNCLE1BQU0sT0FBTyxTQUFVLFNBQVEsR0FBRztJQUFsQzs7UUFDWSxtQkFBYyxHQUFHLFNBQVMsQ0FBQTtRQUVsQyxrRUFBa0U7UUFDMUQsY0FBUyxHQUFHLENBQUMsQ0FBQTtRQUViLGdCQUFXLEdBQUcsQ0FBQyxDQUFBO1FBQ2Ysa0JBQWEsR0FBRyxDQUFDLENBQUE7UUFFakIsd0JBQW1CLEdBQUcsQ0FBQyxDQUFBO1FBQ3ZCLDBCQUFxQixHQUFHLENBQUMsQ0FBQTtJQXlGckMsQ0FBQztJQXZGRyxHQUFHO1FBQ0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUE7UUFDbEIsTUFBTSxjQUFjLEdBQUcsV0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFBO1FBRXhDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsYUFBYSxFQUFFLENBQUE7UUFDeEMsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBRW5FLElBQUksUUFBUSxHQUFnQixJQUFJLENBQUE7UUFDaEMsSUFBSSxjQUFjLEdBQUcsQ0FBQyxRQUFRLENBQUE7UUFDOUIsS0FBSyxJQUFJLElBQUksSUFBSSxLQUFLLEVBQUU7WUFDcEIsTUFBTSxVQUFVLEdBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxLQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGNB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\n\n//# sourceURL=webpack://chess/./src/models/bots/depthNBot.ts?");

/***/ }),

/***/ "./src/models/evaluators/evaluator.ts":
/*!********************************************!*\
  !*** ./src/models/evaluators/evaluator.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Evaluator: () => (/* binding */ Evaluator)\n/* harmony export */ });\nclass Evaluator {\n    constructor(board) {\n        this.board = board;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZhbHVhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9ldmFsdWF0b3JzL2V2YWx1YXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxNQUFNLE9BQWdCLFNBQVM7SUFDM0IsWUFBbUIsS0FBWTtRQUFaLFVBQUssR0FBTCxLQUFLLENBQU87SUFBRyxDQUFDO0NBR3RDIn0=\n\n//# sourceURL=webpack://chess/./src/models/evaluators/evaluator.ts?");

/***/ }),

/***/ "./src/models/evaluators/pieceSquareTableEvaluator.ts":
/*!************************************************************!*\
  !*** ./src/models/evaluators/pieceSquareTableEvaluator.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PieceSquareTableEvaluator: () => (/* binding */ PieceSquareTableEvaluator)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/models/utils.ts\");\n/* harmony import */ var _evaluator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluator */ \"./src/models/evaluators/evaluator.ts\");\n\n\n//Coefficients from https://www.chessprogramming.org/Simplified_Evaluation_Function\nclass PieceSquareTableEvaluator extends _evaluator__WEBPACK_IMPORTED_MODULE_1__.Evaluator {\n    // private static const pawnValue\n    run() {\n        let evaluation = 0;\n        this.board.squares.forEach((piece, squareNb) => {\n            switch (piece?.name) {\n                case null:\n                    return;\n                case 'pawn':\n                    evaluation += this.pawnEvaluation(squareNb, piece.color);\n                    return;\n                case 'knight':\n                    evaluation += this.knightEvaluation(squareNb, piece.color);\n                    return;\n                case 'bishop':\n                    evaluation += this.bishopEvaluation(squareNb, piece.color);\n                    return;\n                case 'rook':\n                    evaluation += this.rookEvaluation(squareNb, piece.color);\n                    return;\n                case 'queen':\n                    evaluation += this.queenEvaluation(squareNb, piece.color);\n                    return;\n                case 'king':\n                    evaluation += this.kingEvaluation(squareNb, piece.color);\n                    return;\n            }\n        });\n        return evaluation;\n    }\n    pieceEvaluation(squareNb, value, coefficients, color) {\n        const colorMultiplier = color === 'white' ? 1 : -1;\n        const { file, rank } = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.squareNbToFileRank)(squareNb);\n        const coefficient = coefficients[color === 'white' ? 7 - rank : rank][color === 'white' ? file : 7 - file];\n        return (value + coefficient) * colorMultiplier;\n    }\n    pawnEvaluation(squareNb, color) {\n        const value = 100;\n        const coefficients = [\n            [0, 0, 0, 0, 0, 0, 0, 0],\n            [50, 50, 50, 50, 50, 50, 50, 50],\n            [10, 10, 20, 30, 30, 20, 10, 10],\n            [5, 5, 10, 25, 25, 10, 5, 5],\n            [0, 0, 0, 20, 20, 0, 0, 0],\n            [5, -5, -10, 0, 0, -10, -5, 5],\n            [5, 10, 10, -20, -20, 10, 10, 5],\n            [0, 0, 0, 0, 0, 0, 0, 0],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n    knightEvaluation(squareNb, color) {\n        const value = 300;\n        const coefficients = [\n            [-50, -40, -30, -30, -30, -30, -40, -50],\n            [-40, -20, 0, 0, 0, 0, -20, -40],\n            [-30, 0, 10, 15, 15, 10, 0, -30],\n            [-30, 5, 15, 20, 20, 15, 5, -30],\n            [-30, 0, 15, 20, 20, 15, 0, -30],\n            [-30, 5, 10, 15, 15, 10, 5, -30],\n            [-40, -20, 0, 5, 5, 0, -20, -40],\n            [-50, -40, -30, -30, -30, -30, -40, -50],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n    bishopEvaluation(squareNb, color) {\n        const value = 320;\n        const coefficients = [\n            [-20, -10, -10, -10, -10, -10, -10, -20],\n            [-10, 0, 0, 0, 0, 0, 0, -10],\n            [-10, 0, 5, 10, 10, 5, 0, -10],\n            [-10, 5, 5, 10, 10, 5, 5, -10],\n            [-10, 0, 10, 10, 10, 10, 0, -10],\n            [-10, 10, 10, 10, 10, 10, 10, -10],\n            [-10, 5, 0, 0, 0, 0, 5, -10],\n            [-20, -10, -10, -10, -10, -10, -10, -20],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n    rookEvaluation(squareNb, color) {\n        const value = 500;\n        const coefficients = [\n            [0, 0, 0, 0, 0, 0, 0, 0],\n            [5, 10, 10, 10, 10, 10, 10, 5],\n            [-5, 0, 0, 0, 0, 0, 0, -5],\n            [-5, 0, 0, 0, 0, 0, 0, -5],\n            [-5, 0, 0, 0, 0, 0, 0, -5],\n            [-5, 0, 0, 0, 0, 0, 0, -5],\n            [-5, 0, 0, 0, 0, 0, 0, -5],\n            [0, 0, 0, 5, 5, 0, 0, 0],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n    queenEvaluation(squareNb, color) {\n        const value = 900;\n        const coefficients = [\n            [-20, -10, -10, -5, -5, -10, -10, -20],\n            [-10, 0, 0, 0, 0, 0, 0, -10],\n            [-10, 0, 5, 5, 5, 5, 0, -10],\n            [-5, 0, 5, 5, 5, 5, 0, -5],\n            [0, 0, 5, 5, 5, 5, 0, -5],\n            [-10, 5, 5, 5, 5, 5, 0, -10],\n            [-10, 0, 5, 0, 0, 0, 0, -10],\n            [-20, -10, -10, -5, -5, -10, -10, -20],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n    kingEvaluation(squareNb, color) {\n        const value = 20000;\n        const coefficients = [\n            [-30, -40, -40, -50, -50, -40, -40, -30],\n            [-30, -40, -40, -50, -50, -40, -40, -30],\n            [-30, -40, -40, -50, -50, -40, -40, -30],\n            [-30, -40, -40, -50, -50, -40, -40, -30],\n            [-20, -30, -30, -40, -40, -30, -30, -20],\n            [-10, -20, -20, -20, -20, -20, -20, -10],\n            [20, 20, 0, 0, 0, 0, 20, 20],\n            [20, 30, 10, 0, 0, 10, 30, 20],\n        ];\n        return this.pieceEvaluation(squareNb, value, coefficients, color);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGllY2VTcXVhcmVUYWJsZUV2YWx1YXRvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbHMvZXZhbHVhdG9ycy9waWVjZVNxdWFyZVRhYmxlRXZhbHVhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUM3QyxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sYUFBYSxDQUFBO0FBRXZDLG1GQUFtRjtBQUVuRixNQUFNLE9BQU8seUJBQTBCLFNBQVEsU0FBUztJQUNwRCxpQ0FBaUM7SUFFakMsR0FBRztRQUNDLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQTtRQUVsQixJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLEVBQUU7WUFDM0MsUUFBUSxLQUFLLEVBQUUsSUFBSSxFQUFFO2dCQUNqQixLQUFLLElBQUk7b0JBQ0wsT0FBTTtnQkFDVixLQUFLLE1BQU07b0JBQ1AsVUFBVSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQTtvQkFDeEQsT0FBTTtnQkFDVixLQUFLLFFBQVE7b0JBQ1QsVUFBVSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFBO29CQUMxRCxPQUFNO2dCQUNWLEtBQUssUUFBUTtvQkFDVCxVQUFVLElBQUksSUFBSSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7b0JBQzFELE9BQU07Z0JBQ1YsS0FBSyxNQUFNO29CQUNQLFVBQVUsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUE7b0JBQ3hELE9BQU07Z0JBQ1YsS0FBSyxPQUFPO29C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QyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDaEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNoQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2hDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDaEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNoQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNoQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1NBQzNDLENBQUE7UUFDRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDckUsQ0FBQztJQUVPLGdCQUFnQixDQUFDLFFBQWdCLEVBQUUsS0FBaUI7UUFDeEQsTUFBTSxLQUFLLEdBQUcsR0FBRyxDQUFBO1FBQ2pCLE1BQU0sWUFBWSxHQUFHO1lBQ2pCLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUM1QixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQzlCLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDOUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUNoQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ2xDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDNUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztTQUMzQyxDQUFBO1FBQ0QsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3JFLENBQUM7SUFFTyxjQUFjLENBQUMsUUFBZ0IsRUFBRSxLQUFpQjtRQUN0RCxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUE7UUFDakIsTUFBTSxZQUFZLEdBQUc7WUFDakIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3hCLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzFCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDMUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUMxQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzFCLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDMUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzNCLENBQUE7UUFDRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDckUsQ0FBQztJQUVPLGVBQWUsQ0FBQyxRQUFnQixFQUFFLEtBQWlCO1FBQ3ZELE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQTtRQUNqQixNQUFNLFlBQVksR0FBRztZQUNqQixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3RDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDNUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUM1QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzFCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDNUIsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUM1QixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1NBQ3pDLENBQUE7UUFDRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDckUsQ0FBQztJQUVPLGNBQWMsQ0FBQyxRQUFnQixFQUFFLEtBQWlCO1FBQ3RELE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQTtRQUNuQixNQUFNLFlBQVksR0FBRztZQUNqQixDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3hDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN4QyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3hDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUM7WUFDeEMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQztZQUN4QyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7WUFDNUIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO1NBQ2pDLENBQUE7UUFDRCxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDckUsQ0FBQztDQUNKIn0=\n\n//# sourceURL=webpack://chess/./src/models/evaluators/pieceSquareTableEvaluator.ts?");

/***/ }),

/***/ "./src/models/game.ts":
/*!****************************!*\
  !*** ./src/models/game.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Game: () => (/* binding */ Game)\n/* harmony export */ });\n/* harmony import */ var _board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./board */ \"./src/models/board.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/models/utils.ts\");\n\n\nclass Game {\n    constructor(FEN) {\n        this._moves = [];\n        this._moveNb = 0;\n        this.startingBoard = FEN ? new _board__WEBPACK_IMPORTED_MODULE_0__.Board(FEN) : new _board__WEBPACK_IMPORTED_MODULE_0__.Board();\n    }\n    get moves() {\n        return this._moves;\n    }\n    get moveNb() {\n        return this._moveNb;\n    }\n    get currentBoard() {\n        if (this._moveNb > 0) {\n            return this._moves[this._moveNb - 1].endBoard;\n        }\n        else {\n            return this.startingBoard;\n        }\n    }\n    get lastMove() {\n        return this._moves[this.getLastMoveIndex()];\n    }\n    addMove(move) {\n        this._moves = this._moves.slice(0, this._moveNb);\n        this._moves.push(move);\n        this._moveNb++;\n    }\n    getLastMoveIndex() {\n        return this.moves.length - 1;\n    }\n    jumpToMove(moveNb) {\n        this._moveNb = moveNb;\n    }\n    get canUndo() {\n        return this._moveNb > 0;\n    }\n    undo(undoAmount) {\n        if (this.canUndo)\n            this._moveNb -= undoAmount;\n    }\n    get canRedo() {\n        return this._moveNb < this._moves.length;\n    }\n    redo() {\n        if (this.canRedo)\n            this._moveNb++;\n    }\n    calculateMoveNotation(moveIndex = this.getLastMoveIndex()) {\n        let notation = '';\n        const move = this._moves[moveIndex];\n        const piece = move.piece;\n        const endBoard = move.endBoard;\n        // Add the piece symbol / pawn file\n        if (move.type === 'shortCastle') {\n            notation += 'O-O';\n        }\n        else if (move.type === 'longCastle') {\n            notation += 'O-O-O';\n        }\n        else {\n            if (piece.name === 'pawn' && (move.type === 'capture' || move.type === 'capturePromotion')) {\n                // The pawn file is added only if it is a capture\n                notation += (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToCoordinates)(move.startSquareNb)[0];\n            }\n            else {\n                notation += piece.notationChar;\n            }\n        }\n        // Add the start square coordinates if there are ambiguities\n        // There can't be ambiguities for pawns because in case of a capture the column is already specified\n        if (piece.name !== 'pawn') {\n            const ambiguousStartSquareNbs = [];\n            const boardBeforeMove = moveIndex > 0 ? this._moves[moveIndex - 1].endBoard : this.startingBoard;\n            boardBeforeMove.possibleMoves().forEach((testedMove) => {\n                if (testedMove.piece.name === piece.name &&\n                    testedMove.endSquareNb === move.endSquareNb &&\n                    testedMove.startSquareNb !== move.startSquareNb) {\n                    ambiguousStartSquareNbs.push(testedMove.startSquareNb);\n                }\n            });\n            if (ambiguousStartSquareNbs.length > 0) {\n                const files = ambiguousStartSquareNbs.map((squareNb) => (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToFileRank)(squareNb).file);\n                const ranks = ambiguousStartSquareNbs.map((squareNb) => (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToFileRank)(squareNb).rank);\n                const { file, rank } = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToFileRank)(move.startSquareNb);\n                const coordinates = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToCoordinates)(move.startSquareNb);\n                if (!files.some((theFile) => file === theFile)) {\n                    notation += coordinates[0];\n                }\n                else if (!ranks.some((theRank) => rank === theRank)) {\n                    notation += coordinates[1];\n                }\n                else {\n                    notation += coordinates;\n                }\n            }\n        }\n        // Add the capture symbol if it is a capture\n        if (move.type === 'capture' || move.type === 'capturePromotion') {\n            notation += 'x';\n        }\n        // Add the end square coordinates\n        if (move.type !== 'shortCastle' && move.type !== 'longCastle') {\n            const endSquareCoordinates = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.squareNbToCoordinates)(move.endSquareNb);\n            notation += endSquareCoordinates;\n        }\n        // Add the promotion symbol if it is a promotion\n        if (move.type === 'promotion' || move.type === 'capturePromotion') {\n            notation += '=' + endBoard.squares[move.endSquareNb].notationChar;\n        }\n        // Add the check / checkmate / stalemate symbol\n        if (endBoard.endOfGame === 'checkmate') {\n            notation += '#';\n        }\n        else if (endBoard.isInCheck()) {\n            notation += '+';\n        }\n        else if (endBoard.endOfGame === 'stalemate') {\n            notation += '½';\n        }\n        return notation;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvZ2FtZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBRS9CLE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxrQkFBa0IsRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUVuRSxNQUFNLE9BQU8sSUFBSTtJQUtiLFlBQVksR0FBWTtRQUhoQixXQUFNLEdBQVcsRUFBRSxDQUFBO1FBQ25CLFlBQU8sR0FBVyxDQUFDLENBQUE7UUFHdkIsSUFBSSxDQUFDLGFBQWEsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssRUFBRSxDQUFBO0lBQzNELENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDTCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUE7SUFDdEIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNOLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUN2QixDQUFDO0lBRUQsSUFBSSxZQUFZO1FBQ1osSUFBSSxJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsRUFBRTtZQUNsQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUE7U0FDaEQ7YUFBTTtZQUNILE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQTtTQUM1QjtJQUNMLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDUixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQTtJQUMvQyxDQUFDO0lBRUQsT0FBTyxDQUFDLElBQVU7UUFDZCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFD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\n\n//# sourceURL=webpack://chess/./src/models/game.ts?");

/***/ }),

/***/ "./src/models/move.ts":
/*!****************************!*\
  !*** ./src/models/move.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Move: () => (/* binding */ Move)\n/* harmony export */ });\nclass Move {\n    constructor(piece, startSquareNb, endSquareNb, endBoard, type) {\n        this.piece = piece;\n        this.startSquareNb = startSquareNb;\n        this.endSquareNb = endSquareNb;\n        this.endBoard = endBoard;\n        this.type = type;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW92ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvbW92ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxNQUFNLE9BQU8sSUFBSTtJQUNiLFlBQ1csS0FBWSxFQUNaLGFBQXFCLEVBQ3JCLFdBQW1CLEVBQ25CLFFBQWUsRUFDZixJQUFjO1FBSmQsVUFBSyxHQUFMLEtBQUssQ0FBTztRQUNaLGtCQUFhLEdBQWIsYUFBYSxDQUFRO1FBQ3JCLGdCQUFXLEdBQVgsV0FBVyxDQUFRO1FBQ25CLGFBQVEsR0FBUixRQUFRLENBQU87UUFDZixTQUFJLEdBQUosSUFBSSxDQUFVO0lBQ3RCLENBQUM7Q0FDUCJ9\n\n//# sourceURL=webpack://chess/./src/models/move.ts?");

/***/ }),

/***/ "./src/models/pieces/bishop.ts":
/*!*************************************!*\
  !*** ./src/models/pieces/bishop.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Bishop: () => (/* binding */ Bishop)\n/* harmony export */ });\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n\nclass Bishop extends _piece__WEBPACK_IMPORTED_MODULE_0__.Piece {\n    get notationChar() {\n        return 'B';\n    }\n    constructor(color) {\n        super('bishop', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        return this.createMovesForRepeatedOffsets(startSquareNb, OFFSETS, board, opponentAttackTable, 'B');\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, OFFSETS, true);\n    }\n    get isSliding() {\n        return true;\n    }\n}\nconst OFFSETS = [\n    { file: 1, rank: 1 },\n    { file: 1, rank: -1 },\n    { file: -1, rank: 1 },\n    { file: -1, rank: -1 },\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmlzaG9wLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9waWVjZXMvYmlzaG9wLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFL0IsTUFBTSxPQUFPLE1BQU8sU0FBUSxLQUFLO0lBQzdCLElBQUksWUFBWTtRQUNaLE9BQU8sR0FBRyxDQUFBO0lBQ2QsQ0FBQztJQUVELFlBQVksS0FBaUI7UUFDekIsS0FBSyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUMxQixDQUFDO0lBRUQsYUFBYSxDQUFDLGFBQXFCLEVBQUUsS0FBWSxFQUFFLG1CQUFnQztRQUMvRSxPQUFPLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxHQUFHLENBQUMsQ0FBQTtJQUN0RyxDQUFDO0lBRUQsaUJBQWlCLENBQUMsYUFBcUIsRUFBRSxLQUFZLEVBQUUsS0FBa0I7UUFDckUsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUN6RSxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1QsT0FBTyxJQUFJLENBQUE7SUFDZixDQUFDO0NBQ0o7QUFFRCxNQUFNLE9BQU8sR0FBZTtJQUN4QixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNwQixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3JCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUU7SUFDckIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO0NBQ3pCLENBQUEifQ==\n\n//# sourceURL=webpack://chess/./src/models/pieces/bishop.ts?");

/***/ }),

/***/ "./src/models/pieces/king.ts":
/*!***********************************!*\
  !*** ./src/models/pieces/king.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   King: () => (/* binding */ King)\n/* harmony export */ });\n/* harmony import */ var _board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../board */ \"./src/models/board.ts\");\n/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../move */ \"./src/models/move.ts\");\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n\n\n\nclass King extends _piece__WEBPACK_IMPORTED_MODULE_2__.Piece {\n    get notationChar() {\n        return 'K';\n    }\n    constructor(color) {\n        super('king', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        const moves = [];\n        for (let offset of OFFSETS) {\n            const endSquareNb = this.addOffset(startSquareNb, offset);\n            this.createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, this.notationChar, (endBoard) => {\n                const canCastle = endBoard.canCastle[this.color];\n                canCastle.queenSide = false;\n                canCastle.kingSide = false;\n            });\n        }\n        // Castling\n        const canCastle = board.canCastle[this.color];\n        if (canCastle.queenSide) {\n            const isClearPath = this.areSquaresClear(board, opponentAttackTable, startSquareNb, [\n                startSquareNb - 1,\n                startSquareNb - 2,\n                startSquareNb - 3,\n            ]);\n            if (isClearPath) {\n                const move = this.createCastling(board, startSquareNb, true);\n                moves.push(move);\n            }\n        }\n        if (canCastle.kingSide) {\n            const isClearPath = this.areSquaresClear(board, opponentAttackTable, startSquareNb, [\n                startSquareNb + 1,\n                startSquareNb + 2,\n            ]);\n            if (isClearPath) {\n                const move = this.createCastling(board, startSquareNb, false);\n                moves.push(move);\n            }\n        }\n        return moves;\n    }\n    areSquaresClear(board, opponentAttackTable, startSquareNb, squareNbs) {\n        return (squareNbs.every((squareNb) => !board.squares[squareNb]) &&\n            [startSquareNb, ...squareNbs].every((squareNb) => !opponentAttackTable.attackedSquares[squareNb]));\n    }\n    createCastling(startBoard, startSquareNb, isLongCastle) {\n        const endBoard = new _board__WEBPACK_IMPORTED_MODULE_0__.Board(startBoard, { switchColor: true, resetEnPassant: true });\n        endBoard.canCastle[this.color][isLongCastle ? 'queenSide' : 'kingSide'] = false;\n        const rookStartPosition = startSquareNb + (isLongCastle ? -4 : 3);\n        const endSquareNb = startSquareNb + (isLongCastle ? -2 : 2);\n        endBoard.squares[endSquareNb] = endBoard.squares[startSquareNb];\n        endBoard.squares[endSquareNb + (isLongCastle ? 1 : -1)] = endBoard.squares[rookStartPosition];\n        endBoard.squares[startSquareNb] = null;\n        endBoard.squares[rookStartPosition] = null;\n        const moveNotation = isLongCastle ? 'O-O-O' : 'O-O';\n        return new _move__WEBPACK_IMPORTED_MODULE_1__.Move(startBoard.squares[startSquareNb], startSquareNb, endSquareNb, endBoard, isLongCastle ? 'longCastle' : 'shortCastle');\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, OFFSETS, false);\n    }\n    get isSliding() {\n        return false;\n    }\n}\nconst OFFSETS = [\n    { file: 1, rank: 1 },\n    { file: 1, rank: 0 },\n    { file: 1, rank: -1 },\n    { file: 0, rank: 1 },\n    { file: 0, rank: -1 },\n    { file: -1, rank: 1 },\n    { file: -1, rank: 0 },\n    { file: -1, rank: -1 },\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2luZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbHMvcGllY2VzL2tpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUNoQyxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBRTlCLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFL0IsTUFBTSxPQUFPLElBQUssU0FBUSxLQUFLO0lBQzNCLElBQUksWUFBWTtRQUNaLE9BQU8sR0FBRyxDQUFBO0lBQ2QsQ0FBQztJQUVELFlBQVksS0FBaUI7UUFDekIsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUN4QixDQUFDO0lBRUQsYUFBYSxDQUFDLGFBQXFCLEVBQUUsS0FBWSxFQUFFLG1CQUFnQztRQUMvRSxNQUFNLEtBQUssR0FBVyxFQUFFLENBQUE7UUFFeEIsS0FBSyxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7WUFDeEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUE7WUFDekQsSUFBSSxDQUFDLFVBQVUsQ0FDWCxLQUFLLEVBQ0wsYUFBYSxFQUNiLFdBQVcsRUFDWCxLQUFLLEVBQ0wsbUJBQW1CLEVBQ25CLElBQUksQ0FBQyxZQUFZLEVBQ2pCLENBQUMsUUFBUSxFQUFFLEVBQUU7Z0JBQ1QsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUE7Z0JBQ2hELFNBQVMsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFBO2dCQUMzQixTQUFTLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQTtZQUM5QixDQUFDLENBQ0osQ0FBQTtTQUNKO1FBRUQsV0FBVztRQUNYLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFB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\n\n//# sourceURL=webpack://chess/./src/models/pieces/king.ts?");

/***/ }),

/***/ "./src/models/pieces/knight.ts":
/*!*************************************!*\
  !*** ./src/models/pieces/knight.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Knight: () => (/* binding */ Knight)\n/* harmony export */ });\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n\nclass Knight extends _piece__WEBPACK_IMPORTED_MODULE_0__.Piece {\n    get notationChar() {\n        return 'N';\n    }\n    constructor(color) {\n        super('knight', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        const moves = [];\n        for (let offset of OFFSETS) {\n            const endSquareNb = this.addOffset(startSquareNb, offset);\n            this.createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, this.notationChar);\n        }\n        return moves;\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, OFFSETS, false);\n    }\n    get isSliding() {\n        return false;\n    }\n}\nconst OFFSETS = [\n    { file: 1, rank: 2 },\n    { file: 2, rank: 1 },\n    { file: 2, rank: -1 },\n    { file: 1, rank: -2 },\n    { file: -1, rank: -2 },\n    { file: -2, rank: -1 },\n    { file: -2, rank: 1 },\n    { file: -1, rank: 2 },\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia25pZ2h0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZGVscy9waWVjZXMva25pZ2h0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFL0IsTUFBTSxPQUFPLE1BQU8sU0FBUSxLQUFLO0lBQzdCLElBQUksWUFBWTtRQUNaLE9BQU8sR0FBRyxDQUFBO0lBQ2QsQ0FBQztJQUVELFlBQVksS0FBaUI7UUFDekIsS0FBSyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQTtJQUMxQixDQUFDO0lBRUQsYUFBYSxDQUFDLGFBQXFCLEVBQUUsS0FBWSxFQUFFLG1CQUFnQztRQUMvRSxNQUFNLEtBQUssR0FBVyxFQUFFLENBQUE7UUFFeEIsS0FBSyxJQUFJLE1BQU0sSUFBSSxPQUFPLEVBQUU7WUFDeEIsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUE7WUFDekQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFBO1NBQ3BHO1FBQ0QsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELGlCQUFpQixDQUFDLGFBQXFCLEVBQUUsS0FBWSxFQUFFLEtBQWtCO1FBQ3JFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDMUUsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sS0FBSyxDQUFBO0lBQ2hCLENBQUM7Q0FDSjtBQUVELE1BQU0sT0FBTyxHQUFxQztJQUM5QyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNwQixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNwQixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3JCLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDckIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3RCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtJQUN0QixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUU7Q0FDeEIsQ0FBQSJ9\n\n//# sourceURL=webpack://chess/./src/models/pieces/knight.ts?");

/***/ }),

/***/ "./src/models/pieces/pawn.ts":
/*!***********************************!*\
  !*** ./src/models/pieces/pawn.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Pawn: () => (/* binding */ Pawn)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"./src/models/utils.ts\");\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n/* harmony import */ var _queen__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./queen */ \"./src/models/pieces/queen.ts\");\n\n\n\nclass Pawn extends _piece__WEBPACK_IMPORTED_MODULE_1__.Piece {\n    get notationChar() {\n        return '';\n    }\n    constructor(color) {\n        super('pawn', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        const moves = [];\n        // Basic moves\n        const moveOneSquareForward = this.addOffset(startSquareNb, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.squareNbToFileRank)(8 * this.direction));\n        const moveTwoSquaresForward = this.addOffset(startSquareNb, (0,_utils__WEBPACK_IMPORTED_MODULE_0__.squareNbToFileRank)(16 * this.direction));\n        const { rank: startRank } = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.squareNbToFileRank)(startSquareNb);\n        const promotionStartRank = this.color === 'white' ? 6 : 1;\n        if (moveOneSquareForward !== null && board.squares[moveOneSquareForward] === null) {\n            // Advance one square if not eligible for promotion\n            if (startRank !== promotionStartRank) {\n                this.createMove(moves, startSquareNb, moveOneSquareForward, board, opponentAttackTable, this.notationChar);\n            }\n            // Advance two squares\n            if (moveTwoSquaresForward !== null &&\n                board.squares[moveTwoSquaresForward] === null &&\n                (this.color === 'white' ? startRank === 1 : startRank === 6)) {\n                this.createMove(moves, startSquareNb, moveTwoSquaresForward, board, opponentAttackTable, this.notationChar, (endBoard) => {\n                    endBoard.enPassantTargetSquareNb = moveOneSquareForward;\n                });\n            }\n        }\n        const createPromotionMove = (endSquareNb) => {\n            this.createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, this.notationChar, (endBoard) => {\n                endBoard.squares[endSquareNb] = new _queen__WEBPACK_IMPORTED_MODULE_2__.Queen(this.color);\n            }, true);\n        };\n        // Forward promotion. The case where the promotion is a capture is dealt within the capture loop\n        if (moveOneSquareForward !== null &&\n            board.squares[moveOneSquareForward] === null &&\n            startRank === promotionStartRank) {\n            createPromotionMove(moveOneSquareForward);\n        }\n        // Basic captures\n        for (let offset of this.captureOffsets) {\n            const endSquareNb = this.addOffset(startSquareNb, offset);\n            if (endSquareNb !== null &&\n                board.squares[endSquareNb] &&\n                board.squares[endSquareNb].color !== this.color) {\n                if (startRank === promotionStartRank) {\n                    createPromotionMove(endSquareNb);\n                }\n                else {\n                    this.createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, this.notationChar);\n                }\n            }\n        }\n        // En passant captures\n        if (board.enPassantTargetSquareNb !== null) {\n            const enPassantTargetSquareNb = board.enPassantTargetSquareNb;\n            const offsetToTarget = enPassantTargetSquareNb - startSquareNb;\n            if (offsetToTarget === 7 * this.direction || offsetToTarget === 9 * this.direction) {\n                this.createMove(moves, startSquareNb, enPassantTargetSquareNb, board, opponentAttackTable, this.notationChar, (endBoard) => {\n                    endBoard.squares[enPassantTargetSquareNb - 8 * this.direction] = null;\n                });\n            }\n        }\n        return moves;\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, this.captureOffsets, false);\n    }\n    get isSliding() {\n        return false;\n    }\n    get direction() {\n        return this.color === 'white' ? 1 : -1;\n    }\n    get captureOffsets() {\n        return [\n            { file: -1, rank: this.direction },\n            { file: 1, rank: this.direction },\n        ];\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGF3bi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbHMvcGllY2VzL3Bhd24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sVUFBVSxDQUFBO0FBQzdDLE9BQU8sRUFBRSxLQUFLLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFDL0IsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUUvQixNQUFNLE9BQU8sSUFBSyxTQUFRLEtBQUs7SUFDM0IsSUFBSSxZQUFZO1FBQ1osT0FBTyxFQUFFLENBQUE7SUFDYixDQUFDO0lBRUQsWUFBWSxLQUFpQjtRQUN6QixLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3hCLENBQUM7SUFFRCxhQUFhLENBQUMsYUFBcUIsRUFBRSxLQUFZLEVBQUUsbUJBQWdDO1FBQy9FLE1BQU0sS0FBSyxHQUFXLEVBQUUsQ0FBQTtRQUV4QixjQUFjO1FBQ2QsTUFBTSxvQkFBb0IsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxrQkFBa0IsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUE7UUFDbEcsTUFBTSxxQkFBcUIsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsRUFBRSxrQkFBa0IsQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUE7UUFDcEcsTUFBTSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsQ0FBQTtRQUM3RCxNQUFNLGtCQUFrQixHQUFHLElBQUksQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUV6RCxJQUFJLG9CQUFvQixLQUFLLElBQUksSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLG9CQUFv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\n\n//# sourceURL=webpack://chess/./src/models/pieces/pawn.ts?");

/***/ }),

/***/ "./src/models/pieces/piece.ts":
/*!************************************!*\
  !*** ./src/models/pieces/piece.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Piece: () => (/* binding */ Piece)\n/* harmony export */ });\n/* harmony import */ var _board__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../board */ \"./src/models/board.ts\");\n/* harmony import */ var _move__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../move */ \"./src/models/move.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/models/utils.ts\");\n\n\n\nclass Piece {\n    constructor(name, color) {\n        this.name = name;\n        this.color = color;\n    }\n    eaten(board) { }\n    addOffset(startSquareNb, offset) {\n        const endSquareNb = startSquareNb + offset.file + offset.rank * 8;\n        if (endSquareNb < 0 || endSquareNb > 63)\n            return null;\n        const { file } = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.squareNbToFileRank)(startSquareNb);\n        if (file + offset.file < 0)\n            return null;\n        if (file + offset.file > 7)\n            return null;\n        return endSquareNb;\n    }\n    createMovesForRepeatedOffsets(startSquareNb, offsets, board, opponentAttackTable, PieceLetter) {\n        const moves = [];\n        for (let offset of offsets) {\n            let endSquareNb = startSquareNb;\n            while (true) {\n                endSquareNb = this.addOffset(endSquareNb, offset);\n                if (endSquareNb === null)\n                    break;\n                this.createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, PieceLetter);\n                if (board.squares[endSquareNb])\n                    break;\n            }\n        }\n        return moves;\n    }\n    createMove(moves, startSquareNb, endSquareNb, board, opponentAttackTable, letter, postMove, isPromotion = false) {\n        if (endSquareNb === null)\n            return;\n        let moveType = isPromotion ? 'promotion' : 'normal';\n        if (board.squares[startSquareNb]?.name === 'pawn' && board.enPassantTargetSquareNb === endSquareNb) {\n            // En passant capture\n            moveType = 'capture';\n            if (!this.isEnPassantLegal(startSquareNb, board))\n                return;\n        }\n        const endSquarePiece = board.squares[endSquareNb];\n        if (!endSquarePiece || endSquarePiece.color !== this.color) {\n            const endBoard = new _board__WEBPACK_IMPORTED_MODULE_0__.Board(board, { switchColor: true, resetEnPassant: true });\n            if (endSquarePiece) {\n                moveType = isPromotion ? 'capturePromotion' : 'capture';\n                endSquarePiece.eaten(endBoard);\n            }\n            endBoard.squares[endSquareNb] = endBoard.squares[startSquareNb];\n            endBoard.squares[startSquareNb] = null;\n            if (postMove)\n                postMove(endBoard);\n            if (this.inCheckAfterMove(startSquareNb, endSquareNb, board, endBoard, opponentAttackTable))\n                return;\n            const move = new _move__WEBPACK_IMPORTED_MODULE_1__.Move(this, startSquareNb, endSquareNb, endBoard, moveType);\n            moves.push(move);\n        }\n    }\n    calculateAttackTable(startSquareNb, board, table, offsets, isSlidingPiece) {\n        for (let offset of offsets) {\n            let endSquareNb = startSquareNb;\n            do {\n                endSquareNb = this.addOffset(endSquareNb, offset);\n                if (endSquareNb === null)\n                    break;\n                table.attackedSquares[endSquareNb] = true;\n                const piece = board.squares[endSquareNb];\n                if (piece) {\n                    if (piece.color !== this.color && piece.name === 'king') {\n                        table.kingAttackers.push(startSquareNb);\n                    }\n                    if (isSlidingPiece) {\n                        if (piece.color !== this.color && this.isPiecePinned(endSquareNb, board, offset)) {\n                            table.pinnedPieces.push({\n                                squareNb: endSquareNb,\n                                offset,\n                            });\n                        }\n                        break;\n                    }\n                }\n            } while (isSlidingPiece);\n        }\n    }\n    isPiecePinned(startSquareNb, board, offset) {\n        const kingSquareNb = board.squares.findIndex((piece) => piece?.name === 'king' && piece.color !== this.color);\n        return this.firstPieceOnAxis(startSquareNb, board, offset) === board.squares[kingSquareNb];\n    }\n    firstPieceOnAxis(startSquareNb, board, offset) {\n        let endSquareNb = startSquareNb;\n        while (true) {\n            endSquareNb = this.addOffset(endSquareNb, offset);\n            if (endSquareNb === null)\n                break;\n            const piece = board.squares[endSquareNb];\n            if (piece)\n                return piece;\n        }\n        return null;\n    }\n    inCheckAfterMove(startSquareNb, endSquareNb, board, endBoard, opponentAttackTable) {\n        const kingAttackers = opponentAttackTable.kingAttackers;\n        const piece = board.squares[startSquareNb];\n        if (piece.name === 'king') {\n            if (opponentAttackTable.attackedSquares[endSquareNb])\n                return true;\n            // If the king is attacked by a sliding piece, check that it does not move alongside the attack axis\n            for (let kingAttacker of kingAttackers) {\n                if (!board.squares[kingAttacker]?.isSliding)\n                    continue;\n                const offset = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.calculateAxisOffset)(kingAttacker, startSquareNb);\n                if (endSquareNb === startSquareNb + offset)\n                    return true;\n            }\n        }\n        else {\n            if (!kingAttackers.length && !opponentAttackTable.pinnedPieces.length)\n                return false;\n            const pinnedPiece = opponentAttackTable.pinnedPieces.find((pinnedPiece) => pinnedPiece.squareNb === startSquareNb);\n            if (pinnedPiece && (startSquareNb - endSquareNb) % (0,_utils__WEBPACK_IMPORTED_MODULE_2__.fileRankToSquareNb)(pinnedPiece.offset) !== 0)\n                return true;\n            if (kingAttackers.length > 1)\n                return true;\n            if (kingAttackers.length === 1) {\n                const kingAttackerSquareNb = kingAttackers[0];\n                const kingSquareNb = endBoard.squares.findIndex((piece) => piece?.name === 'king' && piece.color === this.color);\n                const kingAttacker = board.squares[kingAttackerSquareNb];\n                let isAttackStopped = false;\n                // The move captures the attacking piece (normal capture + en passant)\n                if (endBoard.squares[kingAttackerSquareNb] !== board.squares[kingAttackerSquareNb]) {\n                    isAttackStopped = true;\n                }\n                // The move intersects the attack axis\n                if (!isAttackStopped &&\n                    kingAttacker.isSliding &&\n                    (0,_utils__WEBPACK_IMPORTED_MODULE_2__.isBetweenSquares)(kingAttackerSquareNb, endSquareNb, kingSquareNb)) {\n                    isAttackStopped = true;\n                }\n                if (!isAttackStopped)\n                    return true;\n            }\n        }\n        return false;\n    }\n    isEnPassantLegal(startSquareNb, board) {\n        const kingSquareNb = board.squares.findIndex((piece) => piece?.name === 'king' && piece.color === this.color);\n        const fromSquare = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.squareNbToFileRank)(startSquareNb);\n        const toSquare = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.squareNbToFileRank)(kingSquareNb);\n        const direction = {\n            file: toSquare.file - fromSquare.file,\n            rank: toSquare.rank - fromSquare.rank,\n        };\n        const offset = {\n            file: Math.sign(direction.file),\n            rank: Math.sign(direction.rank),\n        };\n        if (offset.file !== 0 &&\n            offset.rank !== 0 &&\n            Math.abs(direction.file) !== Math.abs(direction.rank / offset.rank)) {\n            // The pawn-to-king offset isn't a possible movement offset\n            return true;\n        }\n        else {\n            const offset = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.calculateAxisOffset)(startSquareNb, kingSquareNb);\n            let squareNb = startSquareNb;\n            // Check that there is a enemy sliding piece attacking the pawn through the pawn-to-king offset\n            // \"offset\" is the pawn-to-king offset so it needs to be reversed\n            const firstPieceOnAxis = this.firstPieceOnAxis(squareNb, board, (0,_utils__WEBPACK_IMPORTED_MODULE_2__.squareNbToFileRank)(-offset));\n            if (firstPieceOnAxis && firstPieceOnAxis.color !== this.color && firstPieceOnAxis.isSliding) {\n                if (Math.abs(offset) === 1 || Math.abs(offset) === 8) {\n                    // The offset is a file or rank offset\n                    if (firstPieceOnAxis.name !== 'rook' && firstPieceOnAxis.name !== 'queen')\n                        return true;\n                }\n                else {\n                    // The offset is a diagonal offset\n                    if (firstPieceOnAxis.name !== 'bishop' && firstPieceOnAxis.name !== 'queen')\n                        return true;\n                }\n                const kingSquareNb = board.squares.findIndex((piece) => piece?.name === 'king' && piece.color === this.color);\n                if (this.firstPieceOnAxis(squareNb + offset, board, (0,_utils__WEBPACK_IMPORTED_MODULE_2__.squareNbToFileRank)(offset)) ===\n                    board.squares[kingSquareNb]) {\n                    // Check there is nothing between the pawn and the king\n                    // Skip the first square (the pawn's square) so that the captured pawn's square isn't checked\n                    return false;\n                }\n            }\n            // The first piece on the offset can't be pinning the pawn\n            return true;\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGllY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kZWxzL3BpZWNlcy9waWVjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBQ2hDLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxTQUFTLENBQUE7QUFFOUIsT0FBTyxFQUFFLG1CQUFtQixFQUFFLGtCQUFrQixFQUFFLGdCQUFnQixFQUFFLGtCQUFrQixFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRXhHLE1BQU0sT0FBZ0IsS0FBSztJQUN2QixZQUFtQixJQUFlLEVBQVMsS0FBaUI7UUFBekMsU0FBSSxHQUFKLElBQUksQ0FBVztRQUFTLFVBQUssR0FBTCxLQUFLLENBQVk7SUFBRyxDQUFDO0lBT2hFLEtBQUssQ0FBQyxLQUFZLElBQVMsQ0FBQztJQUU1QixTQUFTLENBQUMsYUFBcUIsRUFBRSxNQUFnQjtRQUM3QyxNQUFNLFdBQVcsR0FBRyxhQUFhLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQTtRQUNqRSxJQUFJLFdBQVcsR0FBRyxDQUFDLElBQUksV0FBVyxHQUFHLEVBQUU7WUFBRSxPQUFPLElBQUksQ0FBQTtRQUVwRCxNQUFNLEVBQUUsSUFBSSxFQUFFLEdBQUcsa0JBQWtCLENBQUMsYUFBYSxDQUFDLENBQUE7UUFDbEQsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUE7UUFDdkMsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksR0FBRyxDQUFDO1lBQUUsT0FBTyxJQUFJLENBQUE7UUFFdkMsT0FBTyxXQUFXLENBQUE7SUFDdEIsQ0FBQztJQUVELDZCQUE2QixDQUN6QixhQUFxQixFQUNyQixPQUFtQixFQUNuQixLQUFZLEVBQ1osbUJBQWdDLEVBQ2hDLFdBQXdCO1FBRXhC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\n\n//# sourceURL=webpack://chess/./src/models/pieces/piece.ts?");

/***/ }),

/***/ "./src/models/pieces/queen.ts":
/*!************************************!*\
  !*** ./src/models/pieces/queen.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Queen: () => (/* binding */ Queen)\n/* harmony export */ });\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n\nclass Queen extends _piece__WEBPACK_IMPORTED_MODULE_0__.Piece {\n    get notationChar() {\n        return 'Q';\n    }\n    constructor(color) {\n        super('queen', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        return this.createMovesForRepeatedOffsets(startSquareNb, OFFSETS, board, opponentAttackTable, 'Q');\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, OFFSETS, true);\n    }\n    get isSliding() {\n        return true;\n    }\n}\nconst OFFSETS = [\n    { file: 1, rank: 1 },\n    { file: 1, rank: 0 },\n    { file: 1, rank: -1 },\n    { file: 0, rank: 1 },\n    { file: 0, rank: -1 },\n    { file: -1, rank: 1 },\n    { file: -1, rank: 0 },\n    { file: -1, rank: -1 },\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicXVlZW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbW9kZWxzL3BpZWNlcy9xdWVlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQSxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sU0FBUyxDQUFBO0FBRS9CLE1BQU0sT0FBTyxLQUFNLFNBQVEsS0FBSztJQUM1QixJQUFJLFlBQVk7UUFDWixPQUFPLEdBQUcsQ0FBQTtJQUNkLENBQUM7SUFFRCxZQUFZLEtBQWlCO1FBQ3pCLEtBQUssQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUE7SUFDekIsQ0FBQztJQUVELGFBQWEsQ0FBQyxhQUFxQixFQUFFLEtBQVksRUFBRSxtQkFBZ0M7UUFDL0UsT0FBTyxJQUFJLENBQUMsNkJBQTZCLENBQUMsYUFBYSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsR0FBRyxDQUFDLENBQUE7SUFDdEcsQ0FBQztJQUVELGlCQUFpQixDQUFDLGFBQXFCLEVBQUUsS0FBWSxFQUFFLEtBQWtCO1FBQ3JFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxhQUFhLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUE7SUFDekUsQ0FBQztJQUVELElBQUksU0FBUztRQUNULE9BQU8sSUFBSSxDQUFBO0lBQ2YsQ0FBQztDQUNKO0FBRUQsTUFBTSxPQUFPLEdBQUc7SUFDWixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNwQixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNwQixFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFO0lBQ3JCLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO0lBQ3BCLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDckIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtJQUNyQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO0lBQ3JCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtDQUN6QixDQUFBIn0=\n\n//# sourceURL=webpack://chess/./src/models/pieces/queen.ts?");

/***/ }),

/***/ "./src/models/pieces/rook.ts":
/*!***********************************!*\
  !*** ./src/models/pieces/rook.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Rook: () => (/* binding */ Rook)\n/* harmony export */ });\n/* harmony import */ var _piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./piece */ \"./src/models/pieces/piece.ts\");\n\nclass Rook extends _piece__WEBPACK_IMPORTED_MODULE_0__.Piece {\n    get notationChar() {\n        return 'R';\n    }\n    constructor(color) {\n        super('rook', color);\n    }\n    possibleMoves(startSquareNb, board, opponentAttackTable) {\n        const moves = this.createMovesForRepeatedOffsets(startSquareNb, OFFSETS, board, opponentAttackTable, 'R');\n        const isQueenSquare = (this.color === 'white' ? 0 : 56) === startSquareNb;\n        const isKingSquare = (this.color === 'white' ? 7 : 63) === startSquareNb;\n        if (isQueenSquare || isKingSquare) {\n            moves.forEach((move) => {\n                move.endBoard.canCastle[this.color][isQueenSquare ? 'queenSide' : 'kingSide'] = false;\n            });\n        }\n        return moves;\n    }\n    eaten(board) {\n        if (this.color === 'white') {\n            if (board.squares[0] === this)\n                board.canCastle[this.color].queenSide = false;\n            if (board.squares[7] === this)\n                board.canCastle[this.color].kingSide = false;\n        }\n        else {\n            if (board.squares[56] === this)\n                board.canCastle[this.color].queenSide = false;\n            if (board.squares[63] === this)\n                board.canCastle[this.color].kingSide = false;\n        }\n    }\n    updateAttackTable(startSquareNb, board, table) {\n        this.calculateAttackTable(startSquareNb, board, table, OFFSETS, true);\n    }\n    get isSliding() {\n        return true;\n    }\n}\nconst OFFSETS = [\n    { file: 1, rank: 0 },\n    { file: 0, rank: 1 },\n    { file: 0, rank: -1 },\n    { file: -1, rank: 0 },\n];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm9vay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbHMvcGllY2VzL3Jvb2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLFNBQVMsQ0FBQTtBQUUvQixNQUFNLE9BQU8sSUFBSyxTQUFRLEtBQUs7SUFDM0IsSUFBSSxZQUFZO1FBQ1osT0FBTyxHQUFHLENBQUE7SUFDZCxDQUFDO0lBRUQsWUFBWSxLQUFpQjtRQUN6QixLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFBO0lBQ3hCLENBQUM7SUFFRCxhQUFhLENBQUMsYUFBcUIsRUFBRSxLQUFZLEVBQUUsbUJBQWdDO1FBQy9FLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyw2QkFBNkIsQ0FBQyxhQUFhLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxtQkFBbUIsRUFBRSxHQUFHLENBQUMsQ0FBQTtRQUV6RyxNQUFNLGFBQWEsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLGFBQWEsQ0FBQTtRQUN6RSxNQUFNLFlBQVksR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxLQUFLLGFBQWEsQ0FBQTtRQUN4RSxJQUFJLGFBQWEsSUFBSSxZQUFZLEVBQUU7WUFDL0IsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxFQUFFO2dCQUNuQixJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxHQUFHLEtBQUssQ0FBQTtZQUN6RixDQUFDLENBQUMsQ0FBQTtTQUNMO1FBRUQsT0FBTyxLQUFLLENBQUE7SUFDaEIsQ0FBQztJQUVELEtBQUssQ0FBQyxLQUFZO1FBQ2QsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLE9BQU8sRUFBRTtZQUN4QixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSTtnQkFBRSxLQUFLLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFBO1lBQzVFLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsS0FBSyxJQUFJO2dCQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUE7U0FDOUU7YUFBTTtZQUNILElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsS0FBSyxJQUFJO2dCQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUE7WUFDN0UsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLElBQUk7Z0JBQUUsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQTtTQUMvRTtJQUNMLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxhQUFxQixFQUFFLEtBQVksRUFBRSxLQUFrQjtRQUNyRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsYUFBYSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQ3pFLENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDVCxPQUFPLElBQUksQ0FBQTtJQUNmLENBQUM7Q0FDSjtBQUVELE1BQU0sT0FBTyxHQUFHO0lBQ1osRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUU7SUFDcEIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUU7SUFDcEIsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtJQUNyQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO0NBQ3hCLENBQUEifQ==\n\n//# sourceURL=webpack://chess/./src/models/pieces/rook.ts?");

/***/ }),

/***/ "./src/models/utils.ts":
/*!*****************************!*\
  !*** ./src/models/utils.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateAxisOffset: () => (/* binding */ calculateAxisOffset),\n/* harmony export */   coordinatesToSquareNb: () => (/* binding */ coordinatesToSquareNb),\n/* harmony export */   createEmptyAttackTable: () => (/* binding */ createEmptyAttackTable),\n/* harmony export */   fileRankToSquareNb: () => (/* binding */ fileRankToSquareNb),\n/* harmony export */   invertColor: () => (/* binding */ invertColor),\n/* harmony export */   isBetweenSquares: () => (/* binding */ isBetweenSquares),\n/* harmony export */   squareNbToCoordinates: () => (/* binding */ squareNbToCoordinates),\n/* harmony export */   squareNbToFileRank: () => (/* binding */ squareNbToFileRank)\n/* harmony export */ });\nfunction invertColor(color) {\n    return color === 'white' ? 'black' : 'white';\n}\nfunction squareNbToFileRank(squareNb) {\n    const file = squareNb % 8;\n    const rank = squareNb >= 0 ? Math.floor(squareNb / 8) : Math.ceil(squareNb / 8);\n    return {\n        file,\n        rank,\n    };\n}\nfunction fileRankToSquareNb({ file, rank }) {\n    return rank * 8 + file;\n}\nfunction squareNbToCoordinates(squareNb) {\n    const { file, rank } = squareNbToFileRank(squareNb);\n    const fileInLetter = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h'][file];\n    return `${fileInLetter}${rank + 1}`;\n}\nfunction coordinatesToSquareNb(coordinates) {\n    const file = coordinates[0].charCodeAt(0) - 'a'.charCodeAt(0);\n    const rank = Number(coordinates[1]) - 1;\n    return fileRankToSquareNb({ file, rank });\n}\nfunction createEmptyAttackTable() {\n    return { attackedSquares: new Array(64).fill(false), pinnedPieces: [], kingAttackers: [] };\n}\n// Tests if a square is on the segment between two points\nfunction isBetweenSquares(squareNbFrom, testedSquareNb, squareNbTo) {\n    const fromSquare = squareNbToFileRank(squareNbFrom);\n    const toSquare = squareNbToFileRank(squareNbTo);\n    const squareTested = squareNbToFileRank(testedSquareNb);\n    const direction = {\n        file: Math.sign(toSquare.file - fromSquare.file),\n        rank: Math.sign(toSquare.rank - fromSquare.rank),\n    };\n    let currentSquare = fromSquare;\n    currentSquare.file += direction.file;\n    currentSquare.rank += direction.rank;\n    while (currentSquare.file !== toSquare.file || currentSquare.rank !== toSquare.rank) {\n        if (currentSquare.file < 0 || currentSquare.file > 7 || currentSquare.rank < 0 || currentSquare.rank > 7) {\n            return false;\n        }\n        if (currentSquare.file === squareTested.file && currentSquare.rank === squareTested.rank)\n            return true;\n        currentSquare.file += direction.file;\n        currentSquare.rank += direction.rank;\n    }\n    return false;\n}\nfunction calculateAxisOffset(squareNbFrom, squareNbTo) {\n    const fromSquare = squareNbToFileRank(squareNbFrom);\n    const toSquare = squareNbToFileRank(squareNbTo);\n    return fileRankToSquareNb({\n        file: Math.sign(toSquare.file - fromSquare.file),\n        rank: Math.sign(toSquare.rank - fromSquare.rank),\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbW9kZWxzL3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sVUFBVSxXQUFXLENBQUMsS0FBaUI7SUFDekMsT0FBTyxLQUFLLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQTtBQUNoRCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLFFBQWdCO0lBQy9DLE1BQU0sSUFBSSxHQUFHLFFBQVEsR0FBRyxDQUFDLENBQUE7SUFDekIsTUFBTSxJQUFJLEdBQUcsUUFBUSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBRS9FLE9BQU87UUFDSCxJQUFJO1FBQ0osSUFBSTtLQUNQLENBQUE7QUFDTCxDQUFDO0FBRUQsTUFBTSxVQUFVLGtCQUFrQixDQUFDLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBWTtJQUN2RCxPQUFPLElBQUksR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFBO0FBQzFCLENBQUM7QUFFRCxNQUFNLFVBQVUscUJBQXFCLENBQUMsUUFBZ0I7SUFDbEQsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQTtJQUNuRCxNQUFNLFlBQVksR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNuRSxPQUFPLEdBQUcsWUFBWSxHQUFHLElBQUksR0FBRyxDQUFDLEVBQWlCLENBQUE7QUFDdEQsQ0FBQztBQUVELE1B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\n\n//# sourceURL=webpack://chess/./src/models/utils.ts?");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logWithTimestamp: () => (/* binding */ logWithTimestamp),\n/* harmony export */   waitOneMillisecondAsync: () => (/* binding */ waitOneMillisecondAsync)\n/* harmony export */ });\nfunction logWithTimestamp(...message) {\n    const timestamp = new Date().toISOString();\n    console.log(`[${timestamp}]`, ...message);\n}\nasync function waitOneMillisecondAsync() {\n    return new Promise((resolve) => {\n        setTimeout(resolve, 1);\n    });\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTSxVQUFVLGdCQUFnQixDQUFDLEdBQUcsT0FBYztJQUM5QyxNQUFNLFNBQVMsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFBO0lBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxTQUFTLEdBQUcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxDQUFBO0FBQzdDLENBQUM7QUFFRCxNQUFNLENBQUMsS0FBSyxVQUFVLHVCQUF1QjtJQUN6QyxPQUFPLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQUU7UUFDM0IsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUMxQixDQUFDLENBQUMsQ0FBQTtBQUNOLENBQUMifQ==\n\n//# sourceURL=webpack://chess/./src/utils.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/main.ts");
/******/ 	
/******/ })()
;